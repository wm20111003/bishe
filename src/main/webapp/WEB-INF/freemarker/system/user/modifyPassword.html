<#escape x as x?html>
<script type="text/javascript" src="${ctx}/js/system/dicdata/ajaxdicdata.js"></script>
<script src="/shop/ace/js/jquery.min.js"></script>
<link rel="stylesheet" href="/shop/ace/css/bootstrap.min.css" />
<link rel="stylesheet" href="/shop/ace/css/font-awesome.min.css" />
<!-- page specific plugin styles -->
<link rel="stylesheet" href="/shop/ace/css/chosen.css" />
<!-- text fonts -->
<link rel="stylesheet" href="/shop/ace/css/ace-fonts.css" />
<!--[if lte IE 9]>
			<link rel="stylesheet" href="/shop/ace/css/ace-part2.min.css" />
		<![endif]-->
<link rel="stylesheet" href="/shop/ace/css/ace-skins.min.css" />
<link rel="stylesheet" href="/shop/ace/css/ace-rtl.min.css" />
<!-- ace styles -->
<link rel="stylesheet" href="/shop/js/coms/validate/tishi.css" />

<!--[if lte IE 9]>
		  <link rel="stylesheet" href="/shop/ace/css/ace-ie.min.css" />
		<![endif]-->
<!-- basic scripts -->
<script type="text/javascript">
	if ('ontouchstart' in document.documentElement)
		document.write("<script src='/shop/ace/js/jquery.mobile.custom.min.js'>"
						+ "<"+"/script>");
</script>
<script src="/shop/ace/js/bootstrap.min.js"></script>

<!-- box 插件 -->

<!-- ace scripts -->
<!-- ace settings handler -->
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lte IE 8]>
		<script src="/shop/ace/js/html5shiv.js"></script>
		<script src="/shop/ace/js/respond.min.js"></script>
		<![endif]-->
<script src="/shop/js/coms/common/messager.js"></script>
<!-- sco.js -->
<link href="/shop/js/coms/sco/css/scojs.css" rel="stylesheet" />
<script src="/shop/js/coms/sco/js/sco.ajax.js"></script>
<script src="/shop/js/coms/sco/js/sco.modal.js"></script>
<script src="/shop/js/coms/common/common.js"></script>
<script type="text/javascript"
	src="/shop/js/coms/validate/Validform_source.js"></script>
<script type="text/javascript" src="/shop/js/coms/validate/tishi.js"></script>
<!-- layer -->
<script src="/shop/js/coms/layer-v1.8.5/layer/layer.min.js"></script>
<link rel="stylesheet" href="/shop/ace/css/datepicker.css" />
<link rel="stylesheet" href="/shop/ace/css/bootstrap-timepicker.css" />
<link rel="stylesheet" href="/shop/ace/css/daterangepicker.css" />
<link rel="stylesheet"
	href="/shop/ace/css/bootstrap-datetimepicker.css" />
<link rel="stylesheet" href="/shop/ace/css/colorpicker.css" />


<script src="/shop/ace/js/jquery-ui.custom.min.js"></script>
<script src="/shop/ace/js/jquery.ui.touch-punch.min.js"></script>
<script src="/shop/ace/js/chosen.jquery.min.js"></script>
<script src="/shop/ace/js/fuelux/fuelux.spinner.min.js"></script>
<script src="/shop/ace/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="/shop/ace/js/date-time/bootstrap-timepicker.min.js"></script>
<script src="/shop/ace/js/date-time/moment.min.js"></script>
<script src="/shop/ace/js/date-time/daterangepicker.min.js"></script>
<script src="/shop/ace/js/date-time/bootstrap-datetimepicker.min.js"></script>
<script src="/shop/ace/js/date-time/locales/bootstrap-datepicker.zh-CN.js"></script>
<script src="/shop/ace/js/bootstrap-colorpicker.min.js"></script>
<script src="/shop/ace/js/jquery.knob.min.js"></script>
<script src="/shop/ace/js/jquery.autosize.min.js"></script>
<script src="/shop/ace/js/jquery.inputlimiter.1.3.1.min.js"></script>
<script src="/shop/ace/js/jquery.maskedinput.min.js"></script>
<script src="/shop/ace/js/jquery.validate.min.js"></script>
<script src="/shop/js/coms/common/jquery.checkbox.js"></script>
<script src="/shop/ace/js/bootstrap-tag.min.js"></script>

<script src="/shop/js/coms/common/list.js"></script>
<script src="/shop/js/coms/common/pagetoolbar.js"></script>
<script src="/shop/js/coms/common/jquery.form.js"></script>
<script type="text/javascript" src="/shop/js/coms/kindeditor/kindeditor.js"></script>

<script type="text/javascript">

   jQuery(document).ready(function(){
	window.demo1 = myValidataForm("#updateForm");
		demo1.addRule([
						{
							ele:"#password",
							datatype:"*5-16",
							nullmsg:"请输入原密码!",
							errormsg:"密码范围在6-16位之间!"
						},
			  		  	{
		  		  			ele:"#new_password",
		  		  			datatype:"*5-16",
		  		  			nullmsg:"请设置密码!",
		  		  			errormsg:"密码范围在6-16位之间!"
		  		  		},{
		  		  			ele:"#con_password",
		  		  			datatype:"*",
		  		  			recheck:"new_password",
		  		  			nullmsg:"请再次输入密码",
		  		  			errormsg:"密码不一致,请重新输入!"
		  		  		}
			  		  ]);
	
});
 
function submit(){
	var id = $("#id").val();
	//原密码
	var password = $("#password").val();
	var new_password = $("#new_password").val();
	var demo=$("#updateForm").Validform();
	if(demo.check()){
		jQuery.ajax({
			url :"${ctx}/system/user/updatePassword", 
			type :"post",
			data:{'id':id,
				'password':password,
				'new_password':new_password
				},
			dataType : "json",
			success:function(data){
				if(data.status=="error"){
					layer.alert(data.message);
				}else{
					layer.confirm(data.message,function(){
						parent.layer.close(parent.abc);
					});
				}

			}
		});
	}
		
}
</script>
<title></title>
</head>
<body style="background:#fff">
<div class="operate panel panel-default" style="height:65px;">
	<div class="panel-body" align="center">
	<input type="button"  onclick="submit();" class="btn  btn-sm  btn-primary" value="提交"/>
	</div>
</div>

<div class="row">
<form class="form-horizontal" method="post"  action="${ctx}/system/user/updatePassword"  name="updateForm" id="updateForm">

	<div class="col-sm-12" >
		<input type="hidden" id="id" name="id" value="${(returnDatas.data.id)!''}"> 
		<table class="table table-bordered">
		
		<tr>
			<td><nobr>当前用户：</nobr></td>
			<td>${(returnDatas.data.name)!''}</td>
		</tr>
		<tr>
			<td><nobr> 原密码 </nobr></td>
			<td><input type="password"  name="password"  id="password"  class="form-control"   /></td>
		</tr>
		<tr>
			<td><nobr> 新密码 </nobr></td>
			<td><input type="password"  name="new_password"  id="new_password"  class="form-control"   /></td>
		</tr>
		<tr>
			<td><nobr> 确认密码 </nobr></td>
			<td><input type="password"  name="con_password"  id="con_password"  class="form-control"   /></td>
		</tr>
	</table>
</div>
</form>
</div>
</body>
</head>
</html>
</#escape>
